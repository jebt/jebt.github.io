var cellSizeX=10,cellSizeY=10,deadHue=240,liveHue=120,antHue=69,antStroke=240,startHue=69,startStrokeHue=69,antDir=1,newAntDir=1,xCells=60,yCells=47,cells=Array(xCells).fill().map(function(){return Array(yCells)}),oldHue=Array(xCells).fill().map(function(){return Array(yCells)}),antX=30,antY=23,newAntX=30,newAntY=24,antLive=!1;
function setup(){createCanvas(xCells*cellSizeX,yCells*cellSizeY);colorMode(HSB,360);background(0);strokeWeight(2);stroke(255);frameRate(240);for(var a=0;a<cells.length;a++)for(var b=0;b<cells[a].length;b++)cells[a][b]=new Cell(a*cellSizeX,b*cellSizeY,cellSizeX,cellSizeY,startHue,startStrokeHue),oldHue[a][b]=cells[a][b].getFillHue()}
function draw(){if(isOutOfBounds(newAntX,newAntY))resetGrid();else{antDir=newAntDir;antX=newAntX;antY=newAntY;if(1===antDir&&0<antY){if(oldHue[antX][antY-1]===deadHue||oldHue[antX][antY-1]===startHue)newAntDir--,cells[antX][antY-1].setFillHue(liveHue);oldHue[antX][antY-1]===liveHue&&(cells[antX][antY-1].setFillHue(deadHue),newAntDir++);newAntY--}if(2===antDir&&antX<cells.length){if(oldHue[antX+1][antY]===deadHue||oldHue[antX+1][antY]===startHue)newAntDir--,cells[antX+1][antY].setFillHue(liveHue);
oldHue[antX+1][antY]===liveHue&&(newAntDir++,cells[antX+1][antY].setFillHue(deadHue));newAntX++}if(3===antDir&&antY<cells[antX].length){if(oldHue[antX][antY+1]===deadHue||oldHue[antX][antY+1]===startHue)newAntDir--,cells[antX][antY+1].setFillHue(liveHue);oldHue[antX][antY+1]===liveHue&&(newAntDir++,cells[antX][antY+1].setFillHue(deadHue));newAntY++}if(4===antDir&&0<antX){if(oldHue[antX-1][antY]===deadHue||oldHue[antX-1][antY]===startHue)newAntDir--,cells[antX-1][antY].setFillHue(liveHue);oldHue[antX-
1][antY]===liveHue&&(newAntDir++,cells[antX-1][antY].setFillHue(deadHue));newAntX--}0===newAntDir&&(newAntDir=4);5===newAntDir&&(newAntDir=1);for(var a=0;a<cells.length;a++)for(var b=0;b<cells[a].length;b++)cells[a][b].show();for(a=0;a<cells.length;a++)for(b=0;b<cells[a].length;b++)oldHue[a][b]=cells[a][b].getFillHue();cells[newAntX][newAntY].show();0===frameCount%100&&(console.log("\n\n\n"),console.log("Generation #:   "+frameCount),console.log("Generations/s:  "+frameRate()))}}
var Cell=function(a,b,c,d,e,f){this.x=a;this.y=b;this.xx=c;this.yy=d;this.fillHue=e;this.strokeHue=f};Cell.prototype.setFillHue=function(a){this.fillHue=a};Cell.prototype.getFillHue=function(){return this.fillHue};Cell.prototype.show=function(){strokeWeight(3);fill(this.fillHue,360,270);stroke(this.strokeHue,0,0);this.fillHue===startHue&&fill(0,0,45);this.x===newAntX*this.xx&&this.y===newAntY*this.yy&&(stroke(315,360,360),strokeWeight(6));rect(this.x,this.y,this.xx,this.yy)};
function isOutOfBounds(a,b){return 1>a||1>b||a>=xCells-1||b>=yCells-1}function resetGrid(){background(0);newAntDir=antDir=1;antX=30;antY=23;newAntX=30;newAntY=24;for(var a=0;a<cells.length;a++)for(var b=0;b<cells[a].length;b++)cells[a][b]=new Cell(a*cellSizeX,b*cellSizeY,cellSizeX,cellSizeY,startHue,startStrokeHue),oldHue[a][b]=cells[a][b].getFillHue()};